"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPayments=exports.getPayment=exports.createPayment=exports.getToken=exports.createToken=void 0;var _index=_interopRequireDefault(require("@babel/runtime/regenerator/index.js")),_axios=_interopRequireDefault(require("axios")),_validator=require("./validator"),PAYMONGO_API_URL="https://api.paymongo.com/v1",createToken=function(a,b){var c,d;return _index["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,_validator.validateTokenPayload)(b),c.valid){e.next=3;break}throw new Error(c.message);case 3:return e.next=5,_index["default"].awrap((0,_axios["default"])({method:"post",url:"".concat(PAYMONGO_API_URL,"/tokens"),auth:{username:a,password:""},data:b}));case 5:return d=e.sent,e.abrupt("return",d.data);case 7:case"end":return e.stop();}})};exports.createToken=createToken;var getToken=function(a,b){var c;return _index["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:if(b){d.next=2;break}throw new Error("Token id is required.");case 2:return d.next=4,_index["default"].awrap((0,_axios["default"])({method:"get",url:"".concat(PAYMONGO_API_URL,"/tokens/").concat(b),auth:{username:a,password:""}}));case 4:return c=d.sent,d.abrupt("return",c.data);case 6:case"end":return d.stop();}})};exports.getToken=getToken;var createPayment=function(a,b){var c,d;return _index["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,_validator.validatePaymentPayload)(b),c.valid){e.next=3;break}throw new Error(c.message);case 3:return e.next=5,_index["default"].awrap((0,_axios["default"])({method:"post",url:"".concat(PAYMONGO_API_URL,"/payments"),auth:{username:a,password:""},data:b}));case 5:return d=e.sent,e.abrupt("return",d.data);case 7:case"end":return e.stop();}})};exports.createPayment=createPayment;var getPayment=function(a,b){var c;return _index["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:if(b){d.next=2;break}throw new Error("Payment id is required.");case 2:return d.next=4,_index["default"].awrap((0,_axios["default"])({method:"get",url:"".concat(PAYMONGO_API_URL,"/payments/").concat(b),auth:{username:a,password:""}}));case 4:return c=d.sent,d.abrupt("return",c.data);case 6:case"end":return d.stop();}})};exports.getPayment=getPayment;var getPayments=function(a){var b;return _index["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,_index["default"].awrap((0,_axios["default"])({method:"get",url:"".concat(PAYMONGO_API_URL,"/payments"),auth:{username:a,password:""}}));case 2:return b=c.sent,c.abrupt("return",b.data);case 4:case"end":return c.stop();}})};exports.getPayments=getPayments;